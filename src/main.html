<!-- main.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <title>Main Page - Campus Reservation</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <header>
        <h1>Campus Reservation</h1>
        <button class="menu-button">☰</button>
    </header>

    <!-- 사이드 메뉴 -->
    <div class="side-menu">
        <button class="close-menu">&times;</button>
        <div class="user-info">
            <p><span id="currentUser"></span>님 안녕하세요!</p>
        </div>
        <ul>
            <li><a href="my_reservation.html">예약 현황</a></li>
            <li><a href="index.html" onclick="handleLogout(); return false;">로그아웃</a></li>
        </ul>
    </div>

    <!-- 건물 사이드바 -->

    <div class="building-sidebar">
        <button class="close-building-sidebar">&times;</button>
        <div class="building-info">
            <h2 id="selected-building-name"></h2>
            <img id="building-image" src="" alt="건물 이미지" style="width: 100%; margin: 20px 0;">
        </div>
        <div class="reservation-buttons">
            <button class="btn-primary" onclick="handleSpaceReservation()">공간 예약</button>
            <button class="btn-primary" onclick="handleSeatReservation()">좌석 예약</button>
        </div>
    </div>

    <!--
    <div class="building-sidebar">
        <button class="close-building-sidebar">&times;</button>
        <div class="building-info">
            <h2 id="selected-building-name"></h2>
        </div>
        <div class="reservation-buttons">
            <button class="btn-primary" onclick="handleSpaceReservation()">공간 예약</button>
            <button class="btn-primary" onclick="handleSeatReservation()">좌석 예약</button>
        </div>
    </div>
    -->

    <section class="main-page">
        <div class="content">
            <h2>캠퍼스 지도</h2>
            <div class="campus-buttons">
                <button class="campus-btn" onclick="switchCampus('seoul')">서울캠퍼스(자연)</button>
                <button class="campus-btn active" onclick="switchCampus('sejong')">세종캠퍼스</button>
                <button class="campus-btn" onclick="switchCampus('shared')">세종공동캠퍼스</button>
            </div>
            <br>
            <div class="map-container">
                <div id="map">
                    <!-- 세종캠퍼스 맵 -->
                    <svg id="sejong-map" viewBox="0 0 1250 650" class="map-image" preserveAspectRatio="xMidYMid meet">
                        <!-- 건물 -->
                        <rect class="building" x="10" y="500" width="150" height="60" onclick="showBuilding(event, '가속기 ICT 융합관')" />
                        <text x="85" y="530" class="building-label">가속기 ICT 융합관</text>
                        
                        <rect class="building" x="175" y="500" width="150" height="60" onclick="showBuilding(event, '산학협력관')" />
                        <text x="250" y="530" class="building-label">산학협력관</text>
                        
                        <rect class="building" x="340" y="500" width="170" height="60" onclick="showBuilding(event, '농심국제관')" />
                        <text x="425" y="530" class="building-label">농심국제관</text>


                        
                        <rect class="building" x="0" y="330" width="80" height="90" onclick="showBuilding(event, '약학 대학')" />
                        <text x="40" y="380" class="building-label">약학 대학</text>
                        
                        <rect class="building" x="100" y="330" width="150" height="70" onclick="showBuilding(event, '과학기술 1관')" />
                        <text x="175" y="370" class="building-label">과학기술 1관</text>
                        
                        <rect class="building" x="550" y="330" width="170" height="50" onclick="showBuilding(event, '학술 정보원')" />
                        <text x="635" y="360" class="building-label">학술 정보원</text>
                        
                        <rect class="building" x="570" y="180" width="130" height="50" onclick="showBuilding(event, '과학기술 2관')" />
                        <text x="635" y="210" class="building-label">과학기술 2관</text>
                        
                        <rect class="building" x="910" y="160" width="170" height="70" onclick="showBuilding(event, '석원 경상관')" />
                        <text x="1000" y="200" class="building-label">석원 경상관</text>
                        
                        <rect class="building" x="1100" y="180" width="130" height="50" onclick="showBuilding(event, '문스대')" />
                        <text x="1165" y="210" class="building-label">문스대</text>
                        
                        <rect class="building" x="1250" y="180" width="60" height="50" onclick="showBuilding(event, '체육관')" />
                        <text x="1280" y="210" class="building-label">체육관</text>
                        
                        <rect class="building" x="720" y="110" width="150" height="50" onclick="showBuilding(event, '공공정책관')" />
                        <text x="795" y="140" class="building-label">공공정책관</text>
                        
                        

                        <!-- 도로 -->
                        <rect class="road" x="0" y="430" width="1200" height="30" />
                        <rect class="road" x="530" y="200" width="10" height="400" />
                        <rect class="road" x="880" y="430" width="40" height="210" />
                        <rect class="road" x="110" y="250" width="1300" height="40" />
                        <rect class="road" x="730" y="250" width="20" height="200" />


                        <!-- 그라운드 -->
                        <rect class="grass" x="760" y="300" width="300" height="120" />
                        <rect class="grass" x="280" y="300" width="230" height="120" />
                        <rect class="area" x="560" y="470" width="300" height="150" />
                        <text x="700" y="545" class="building-label-italic">주차장</text>
                        <rect class="area" x="100" y="50" width="400" height="180" />
                        <text x="300" y="150" class="building-label-italic">기숙사</text>
                        <rect class="unusable-building" x="1080" y="300" width="70" height="120" />
                        <text x="1115" y="350" class="building-label-italic">학술</text>
                        <text x="1115" y="370" class="building-label-italic">회관</text>
  
                    </svg>
                    

                    <!-- 서울캠퍼스 맵 (숨김) -->
                    <svg id="seoul-map" viewBox="0 0 1300 700" class="map-image" style="display: none;">
                        <!--도로-->
                        <rect class="road" x="50", y="130", width="1200", height="30" />
                        <rect class="road" x="610", y="130", width="100", height="300" />
                        <rect class="road" x="630", y="400", width="50", height="330" />
                        <rect class="road" x="630", y="400", width="80", height="110" />

                        <rect class="road" x="50", y="130", width="30", height="280" />
                        <rect class="road" x="180", y="130", width="80", height="190" />
                        <rect class="road" x="180", y="310", width="10", height="100" />

                        <rect class="road" x="180", y="420", width="500", height="30" />
                        <rect class="road" x="210", y="420", width="30", height="210" />
                        <rect class="road" x="340", y="420", width="50", height="210" />
                        <rect class="road" x="510", y="420", width="30", height="210" />
                        <rect class="road" x="50", y="400", width="140", height="20" />
                        <rect class="road" x="240", y="600", width="400", height="30" />


                        <rect class="road" x="670", y="240", width="420", height="20" />
                        <rect class="road" x="670", y="500", width="300", height="20" />
                        <rect class="road" x="670", y="640", width="410", height="30" />
                        <rect class="road" x="960", y="480", width="140", height="30" />
                        <rect class="road" x="1080", y="550", width="170", height="40" />

                        <rect class="road" x="960", y="500", width="30", height="150" />
                        <rect class="road" x="1080", y="130", width="40", height="540" />
                        <rect class="road" x="1250", y="130", width="40", height="600" />
                        
                        
                        <!--상단-->
                        <rect class="building" x="260", y="50", width="200", height="70" onclick="showBuilding(event, '기초과학관')" />
                        <text x="350" y="90" class="building-label2">기초과학관</text>
                        <rect class="building" x="530", y="10", width="250", height="100" onclick="showBuilding(event, '이산이학관')" />
                        <text x="650" y="65" class="building-label2">이산이학관</text>
                        <rect class="building" x="850", y="50", width="200", height="70" onclick="showBuilding(event, '생명과학관(서관)')" />
                        <text x="950" y="90" class="building-label2">생명과학관(서관)</text>

                        <!--왼쪽-->
                        <rect class="building" x="90", y="180", width="70", height="200" onclick="showBuilding(event, '산학관')" />
                        <text x="122" y="210" class="building-label2">산학관</text>
                        <rect class="building" x="210", y="330", width="320", height="80" onclick="showBuilding(event, '공학관')" />
                        <text x="380" y="380" class="building-label2">공학관</text>
                        <rect class="building" x="250", y="470", width="70", height="100" onclick="showBuilding(event, '전파공학관')" />
                        <text x="275" y="500" class="building-label2">전파</text>
                        <text x="285" y="525" class="building-label2">공학관</text>
                        <rect class="building" x="420", y="460", width="80", height="130" onclick="showBuilding(event, '창의관')" />
                        <text x="460" y="525" class="building-label2">창의관</text>
                        <rect class="building" x="555", y="470", width="70", height="100" onclick="showBuilding(event, '공학관(별관)')" />
                        <text x="590" y="525" class="building-label2">공학관</text>
                        <text x="590" y="550" class="building-label2">(별관)</text>
                        <rect class="building" x="270", y="640", width="100", height="50" onclick="showBuilding(event, '실내체육관')" />
                        <text x="320" y="675" class="building-label2">실내체육관</text>
                        
                        <!--오른쪽-->
                        <rect class="building" x="800", y="270", width="240", height="90" onclick="showBuilding(event, '과학도서관')" />
                        <text x="900" y="320" class="building-label2">과학도서관</text>
                        <rect class="building" x="1145", y="180", width="90", height="200" onclick="showBuilding(event, '생명과학관')" />
                        <text x="1175" y="220" class="building-label2">생명</text>
                        <text x="1185" y="245" class="building-label2">과학관</text>
                        <rect class="building" x="1150", y="450", width="70", height="80" onclick="showBuilding(event, '정보전산처')" />
                        <text x="1180" y="490" class="building-label2">정보</text>
                        <text x="1185" y="515" class="building-label2">전산처</text>
                        <rect class="building" x="700", y="550", width="250", height="70" onclick="showBuilding(event, '제2공학관')" />
                        <text x="800" y="590" class="building-label2">제2공학관</text>
                        <rect class="building" x="1000", y="520", width="60", height="100" onclick="showBuilding(event, '이학관')" />
                        <text x="1030" y="570" class="building-label2">이학관</text>


                        <!--그라운드-->
                        <rect class="grass" x="275" y="165" width="325" height="150" />
                        <rect class="area" x="385" y="220" width="110" height="60" />
                        <text x="435" y="255" class="building-label-italic">하나스퀘어</text>

                        <rect class="grass" x="720" y="410" width="230" height="80" />

                        <rect class="grass" x="390" y="635" width="220" height="60" />


                    </svg>

                    <!-- 세종공동캠퍼스 맵 (숨김) -->
                    <svg id="shared-map" viewBox="0 0 1200 700" class="map-image" style="display: none;">
                        <rect class="building" x="700" y="100" width="120" height="310" onclick="showBuilding(event, '세종공동실험실습관')" />
                        <text x="755" y="150" class="building-label2">세종공동</text>
                        <text x="755" y="175" class="building-label2">실험실습관</text>
                        <rect class="building" x="200" y="500" width="200" height="100" onclick="showBuilding(event, '행정전문대학원관')" />
                        <text x="300" y="555" class="building-label2">행정전문대학원관</text>
                        <rect class="building" x="100" y="330" width="150" height="70" onclick="showBuilding(event, '인공지능관')" />
                        <text x="170" y="375" class="building-label2">인공지능관</text>
                        <rect class="building" x="350" y="300" width="280" height="100" onclick="showBuilding(event, '미래기술산업관')" />
                        <text x="490" y="355" class="building-label2">미래기술산업관</text>

                        <rect class="road" x="0", y="430", width="1200", height="50" />
                        <rect class="road" x="650", y="0", width="30", height="600" />
                        <rect class="road" x="0", y="200", width="30", height="600" />
                    </svg>
                </div>
                <p>지도에서 건물을 선택하여 예약 가능 여부를 확인하세요.</p>
            </div>
        </div>
    </section>

    <footer>
        <p>© 2024 고려대학교 사이버보안학과 2024-2R 웹프로그래밍 무엇을도와드릴까요.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 메뉴 사이드바 관련
            const menuBtn = document.querySelector('.menu-button');
            const closeMenuBtn = document.querySelector('.close-menu');
            const sideMenu = document.querySelector('.side-menu');
            
            // 건물 사이드바 관련
            const closeBuildingBtn = document.querySelector('.close-building-sidebar');
            const buildingSidebar = document.querySelector('.building-sidebar');

            menuBtn.addEventListener('click', () => {
                sideMenu.classList.add('active');
            });

            closeMenuBtn.addEventListener('click', () => {
                sideMenu.classList.remove('active');
            });

            closeBuildingBtn.addEventListener('click', () => {
                buildingSidebar.classList.remove('active');
            });

            // 메인 페이지 클릭 시 모든 사이드바 닫기
            const mainPage = document.querySelector('.main-page');
            mainPage.addEventListener('click', function(event) {
                sideMenu.classList.remove('active');
                buildingSidebar.classList.remove('active');
            });
        });

        function showBuilding(event, buildingName) {
            // 클릭 이벤트 전파 방지
            event.stopPropagation();
            console.log('Building clicked:', buildingName);
            
            // 요소 찾기
            const buildingSidebar = document.querySelector('.building-sidebar');
            const selectedBuildingName = document.getElementById('selected-building-name');
            
            if (!buildingSidebar) {
                console.error('Sidebar not found!');
                return;
            }
            
            if (!selectedBuildingName) {
                console.error('Building name element not found!');
                return;
            }

            // 건물 이름 설정 및 사이드바 활성화
            selectedBuildingName.textContent = buildingName;
            buildingSidebar.classList.add('active');
        }

        function handleSpaceReservation() {
            alert('공간 예약 페이지로 이동합니다.');
        }

        function handleSeatReservation() {
            alert('좌석 예약 페이지로 이동합니다.');
        }

        function switchCampus(campus) {
            document.getElementById('sejong-map').style.display = 'none';
            document.getElementById('seoul-map').style.display = 'none';
            document.getElementById('shared-map').style.display = 'none';
            
            document.getElementById(`${campus}-map`).style.display = 'block';
            
            document.querySelectorAll('.campus-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        const buildingImages = {
            '가속기 ICT 융합관': './images/buildings/ict.jpg',
            '산학협력관': './images/buildings/industry.jpg',
            '농심국제관': './images/buildings/nongshim.jpg',
            '약학 대학': './images/buildings/pharmacy.jpg',
            '과학기술 1관': './images/buildings/science1.jpg',
            '학술 정보원': './images/buildings/library.jpg',
            '과학기술 2관': './images/buildings/science2.jpg',
            '석원 경상관': './images/buildings/business.jpg',
            '문스대': './images/buildings/sports.jpg',
            '체육관': './images/buildings/gym.jpg',
            '공공정책관': './images/buildings/public.jpg',

            //서울캠퍼스
            '기초과학관': './images/buildings/basic.jpg',
            '이산이학관': './images/buildings/discrete.jpg',
            '생명과학관(서관)': './images/buildings/lifewest.jpg',
            '산학관': './images/buildings/industry2.jpg',
            '공학관': './images/buildings/engineering.jpg',
            '전파공학관': './images/buildings/radio.jpg',
            '창의관': './images/buildings/creative.jpg',
            '공학관(별관)': './images/buildings/engineering2.jpg',
            '실내체육관': './images/buildings/gym2.jpg',
            '과학도서관': './images/buildings/scienceLibrary.jpg',
            '생명과학관': './images/buildings/life.jpg',
            '이학관': './images/buildings/math.jpg',
            '제2공학관': './images/buildings/engineering.jpg',
            '정보전산처': './images/buildings/information.jpg',

            //세종공동캠퍼스
            '세종공동실험실습관': './images/buildings/shared.jpg',
            '행정전문대학원관': './images/buildings/admin.jpg',
            '인공지능관': './images/buildings/ai.jpg',
            '미래기술산업관': './images/buildings/future.jpg'
        // 나머지 건물들도 같은 형식으로 추가
    };

    function showBuilding(event, buildingName) {
        event.stopPropagation();

        const buildingSidebar = document.querySelector('.building-sidebar');
        const selectedBuildingName = document.getElementById('selected-building-name');
        const buildingImage = document.getElementById('building-image');

        if (!buildingSidebar || !selectedBuildingName || !buildingImage) {
            console.error('Required elements not found!');
            return;
        }

        // 건물 이름 설정
        selectedBuildingName.textContent = buildingName;

        // 건물 이미지 설정
        if (buildingImages[buildingName]) {
            buildingImage.src = buildingImages[buildingName];
            buildingImage.style.display = 'block';
        } else {
            buildingImage.src = './images/buildings/default.jpg'; // 기본 이미지
            console.warn(`No image found for ${buildingName}`);
        }

        buildingSidebar.classList.add('active');
    }
</script>
    </script>
</body>
</html>
